<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#4f46e5">
    <meta name="description" content="100% Free Korean Learning for Beginner to Intermediate! Master Hangul, Vocabulary, Grammar, Flashcards, & Quizzes online.">
    <link rel="manifest" href="manifest.webmanifest">
    <link rel="icon" href="favicon.ico" type="image/x-icon">
    <title>Korean Learning</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/components.base.css">
    <link rel="stylesheet" href="css/components.sections.css">
    <link rel="stylesheet" href="css/components.modals.css">
    <link rel="stylesheet" href="css/grammar.css">
    <meta name="msvalidate.01" content="29B4B0417D53047E5F63B880F91AFCE2" />
    <meta name="google-site-verification" content="jev1zJ-CNPXYAtBnajhT9ACHWUAWPuwvzoPJMjgWQls" />

    <!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-4P47NVQZ71"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-4P47NVQZ71');
</script>

    <!-- Clarity tracking code for https://pkc0412.github.io/PKC-Korean-Learning/ -->
<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "ud8s91n32s");
</script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="header-left">
                    <button id="help-btn" class="help-btn" data-i18n="menu.help">ë„ì›€ë§</button>
                    <button id="language-btn" class="lang-btn" aria-label="Select language" data-i18n="language.modalTitle">
                        ì–¸ì–´
                    </button>
                </div>
                <h1 class="app-title" data-i18n="app.title">Korean Learning</h1>
                <button id="theme-toggle" class="theme-toggle-btn" aria-label="Toggle theme">
                    <span class="theme-icon">ğŸŒ™</span>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Navigation Menu -->
            <nav class="menu-container">
                <div class="menu-grid">
                    <button class="menu-card" id="btn-hangul">
                        <span class="menu-icon">ğŸ”¤</span>
                        <span class="menu-label" data-i18n="menu.hangul">í•œê¸€ ë°°ìš°ê¸°</span>
                    </button>
                    <button class="menu-card" id="btn-vocabulary">
                        <span class="menu-icon">ğŸ“š</span>
                        <span class="menu-label" data-i18n="menu.vocabulary">ì–´íœ˜ í•™ìŠµ</span>
                    </button>
                    <button class="menu-card" id="btn-flashcard">
                        <span class="menu-icon">ğŸ´</span>
                        <span class="menu-label" data-i18n="menu.flashcard">í”Œë˜ì‹œì¹´ë“œ</span>
                    </button>
                    <button class="menu-card" id="btn-grammar">
                        <span class="menu-icon">âœï¸</span>
                        <span class="menu-label" data-i18n="menu.grammar">ë¬¸ë²• í•™ìŠµ</span>
                    </button>
                </div>
            </nav>

            <!-- Hangul Learning Section -->
            <section id="hangul-section" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2 data-i18n="menu.hangul">í•œê¸€ ë°°ìš°ê¸°</h2>
                    <button class="close-btn" onclick="showWelcome()">âœ•</button>
                </div>
                <div id="hangul-container" class="hangul-container">
                    <!-- Hangul content will be loaded here -->
                </div>
            </section>

            <!-- Vocabulary Section -->
            <section id="vocabulary-section" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2 data-i18n="menu.vocabulary">ì–´íœ˜ í•™ìŠµ</h2>
                    <button class="close-btn" onclick="showWelcome()">âœ•</button>
                </div>
                <div id="vocabulary-container" class="vocabulary-container">
                    <!-- Vocabulary content will be loaded here -->
                </div>
            </section>

            <!-- Flashcard Section -->
            <section id="flashcard-section" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2 data-i18n="menu.flashcard">í”Œë˜ì‹œì¹´ë“œ</h2>
                    <button class="close-btn" onclick="showWelcome()">âœ•</button>
                </div>
                <div id="flashcard-container" class="flashcard-container">
                    <!-- Flashcard content will be loaded here -->
                </div>
            </section>

            <!-- Grammar Section -->
            <section id="grammar-section" class="content-section" style="display: none;">
                <div class="section-header">
                    <h2 data-i18n="menu.grammar">ë¬¸ë²• í•™ìŠµ</h2>
                    <button class="close-btn" onclick="showWelcome()">âœ•</button>
                </div>
                <div id="grammar-container" class="grammar-container">
                    <!-- Grammar content will be loaded here -->
                </div>
            </section>
        </main>
    </div>

    <!-- HELP Modal -->
    <div id="helpModal" class="modal-overlay">
        <div class="modal-content">
            <span class="modal-close" id="closeHelpModal">Ã—</span>
            <div class="modal-header">âœï¸ <span data-i18n="help.header">ì œì‘ì & ì—°ë½ì²˜</span></div>
            <p style="margin-bottom:1rem;line-height:1.6;color:var(--text-secondary);" data-i18n="help.description">ì§ˆë¬¸, ë²„ê·¸ ì œë³´, ê°œì„  ì˜ê²¬ì´ ìˆë‹¤ë©´<br>ì•„ë˜ ì±„ë„ë¡œ í¸í•˜ê²Œ ì—°ë½ ì£¼ì„¸ìš”.</p>
            <p style="font-weight:600;margin-bottom:1rem;"><span data-i18n="help.creatorLabel">ì œì‘ì:</span> PKC</p>
            <div class="modal-links">
                <a href="https://pkc0412.tistory.com/" target="_blank" rel="noopener noreferrer">pkc0412.tistory.com</a>
                <a href="mailto:pkc0412@gmail.com" target="_blank" rel="noopener noreferrer">pkc0412@gmail.com</a>
            </div>
        </div>
    </div>


    <!-- Language Selection Modal -->
    <div id="languageModal" class="modal-overlay">
        <div class="modal-content language-modal">
            <span class="modal-close" id="closeLanguageModal">Ã—</span>
            <div class="modal-header">ğŸŒ <span data-i18n="language.modalTitle">ì–¸ì–´</span></div>
            <p class="modal-description" data-i18n="language.modalDescription">
                ì¸í„°í˜ì´ìŠ¤ ì–¸ì–´ë¥¼ ì„ íƒí•˜ì„¸ìš”. ë‚˜ì¤‘ì— ì–¸ì œë“ ì§€ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
            </p>
            <div class="language-grid">
                <button class="language-option selected" data-lang="ko">í•œêµ­ì–´ (ê¸°ë³¸)</button>
                <button class="language-option" data-lang="en" data-i18n="language.names.en">English</button>
                <button class="language-option" data-lang="zh" data-i18n="language.names.zh">ç®€ä½“ä¸­æ–‡</button>
                <button class="language-option" data-lang="ja" data-i18n="language.names.ja">æ—¥æœ¬èª</button>
                <button class="language-option" data-lang="ru" data-i18n="language.names.ru">Ğ ÑƒÑÑĞºĞ¸Ğ¹</button>
                <button class="language-option" data-lang="es" data-i18n="language.names.es">EspaÃ±ol</button>
                <button class="language-option" data-lang="fr" data-i18n="language.names.fr">FranÃ§ais</button>
                <button class="language-option" data-lang="it" data-i18n="language.names.it">Italiano</button>
                <button class="language-option" data-lang="de" data-i18n="language.names.de">Deutsch</button>
                <button class="language-option" data-lang="th" data-i18n="language.names.th">à¹„à¸—à¸¢</button>
                <button class="language-option" data-lang="pt" data-i18n="language.names.pt">PortuguÃªs</button>
                <button class="language-option" data-lang="nl" data-i18n="language.names.nl">Nederlands</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="config.js"></script>
    <script src="i18n.js"></script>
    <script src="js/theme.js"></script>
    <script src="js/speech.js"></script>
    <script src="js/app.js"></script>
    <script src="js/hangul-learning.js"></script>
    <script src="js/vocabulary-learning.js"></script>
    <script src="js/grammar-ui.js"></script>
    <script src="js/flashcard.js"></script>

    <script>


        // HELP & Language Modal + i18n Script
        const helpBtn = document.getElementById('help-btn');
        const helpModal = document.getElementById('helpModal');
        const closeHelpModal = document.getElementById('closeHelpModal');

        if (helpBtn && helpModal && closeHelpModal) {
            helpBtn.addEventListener('click', () => {
                helpModal.classList.add('active');
            });

            closeHelpModal.addEventListener('click', () => {
                helpModal.classList.remove('active');
            });

            helpModal.addEventListener('click', e => {
                if (e.target === helpModal) {
                    helpModal.classList.remove('active');
                }
            });
        }

        // Language modal
        const languageBtn = document.getElementById('language-btn');
        const languageModal = document.getElementById('languageModal');
        const closeLanguageModal = document.getElementById('closeLanguageModal');

        if (languageBtn && languageModal && closeLanguageModal) {
            languageBtn.addEventListener('click', () => {
                languageModal.classList.add('active');
            });

            closeLanguageModal.addEventListener('click', () => {
                languageModal.classList.remove('active');
            });

            languageModal.addEventListener('click', (e) => {
                if (e.target === languageModal) {
                    languageModal.classList.remove('active');
                }
            });
        }

        // ESC í‚¤ë¡œ ëª¨ë“  ëª¨ë‹¬ ë‹«ê¸°
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' || e.key === 'Esc') {
                const allModals = document.querySelectorAll('.modal-overlay.active');
                allModals.forEach(modal => {
                    modal.classList.remove('active');
                });
            }
        });

        // i18n initialization
        const supportedLanguages = ['en', 'zh', 'ja', 'ru', 'es', 'fr', 'it', 'de', 'th', 'pt', 'nl'];
        const defaultLanguage = 'ko';

        function normalizeLanguage(lang) {
            if (!lang || typeof lang !== 'string') return defaultLanguage;
            const lower = lang.toLowerCase();
            const base = lower.split('-')[0];
            if (supportedLanguages.includes(lower)) return lower;
            if (supportedLanguages.includes(base)) return base;
            // ê·¸ ì™¸(ko / ko-KR í¬í•¨)ëŠ” ëª¨ë‘ ê¸°ë³¸ í•œêµ­ì–´ë¡œ ì²˜ë¦¬
            return defaultLanguage;
        }

        async function applyLanguage(lang) {
            const normalized = normalizeLanguage(lang);
            if (!window.I18n) return;

            // ê¸°ë³¸ í•œêµ­ì–´ ëª¨ë“œì—ì„œëŠ” ì–¸ì–´íŒ©ì„ ì ìš©í•˜ì§€ ì•ŠëŠ”ë‹¤
            if (normalized === defaultLanguage) {
                try {
                    localStorage.removeItem('preferredLanguage');
                } catch (e) {
                    console.warn('Could not clear preferredLanguage from storage', e);
                }
                // ë‹¤ë¥¸ ì–¸ì–´ì—ì„œ í•œêµ­ì–´ë¡œ ë˜ëŒë¦´ ë•ŒëŠ” ìƒˆë¡œê³ ì¹¨ì´ ê°€ì¥ ì•ˆì „í•˜ë‹¤
                window.location.reload();
                return;
            }

            try {
                await I18n.load(normalized);
                I18n.apply();
            } catch (err) {
                console.error('Failed to apply language:', err);
            }

            const options = document.querySelectorAll('.language-option');
            options.forEach((btn) => {
                if (btn.dataset.lang === normalized) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });

            try {
                localStorage.setItem('preferredLanguage', normalized);
            } catch (e) {
                console.warn('Could not store preferredLanguage', e);
            }
        }

        function setupLanguageOptions() {
            const options = document.querySelectorAll('.language-option');
            options.forEach((btn) => {
                btn.addEventListener('click', () => {
                    const selectedLang = btn.dataset.lang;
                    applyLanguage(selectedLang);
                    if (languageModal) {
                        languageModal.classList.remove('active');
                    }
                });
            });
        }

        (function initI18n() {
            let initialLang = defaultLanguage;

            try {
                const stored = localStorage.getItem('preferredLanguage');
                if (stored) {
                    const normalizedStored = normalizeLanguage(stored);
                    if (supportedLanguages.includes(normalizedStored)) {
                        initialLang = normalizedStored;
                    }
                } else if (navigator.language || navigator.userLanguage) {
                    const browserLang = normalizeLanguage(navigator.language || navigator.userLanguage);
                    if (supportedLanguages.includes(browserLang)) {
                        initialLang = browserLang;
                    }
                }
            } catch (e) {
                console.warn('Could not read preferredLanguage from storage', e);
            }

            // í•œêµ­ì–´(ê¸°ë³¸ê°’)ëŠ” ì–¸ì–´íŒ©ì„ ì ìš©í•˜ì§€ ì•Šê³ ,
            // ë‹¤ë¥¸ ì–¸ì–´(en, ja ë“±)ì¼ ë•Œë§Œ ì–¸ì–´íŒ©ìœ¼ë¡œ ë®ì–´ì“´ë‹¤.
            if (initialLang !== defaultLanguage) {
                applyLanguage(initialLang);
            }
            setupLanguageOptions();

            // ê¸°ë³¸ í•œêµ­ì–´ ëª¨ë“œì¼ ë•ŒëŠ” ì–¸ì–´ ëª¨ë‹¬ì—ì„œ í•œêµ­ì–´ ë²„íŠ¼ì„ ì„ íƒ ìƒíƒœë¡œ í‘œì‹œ
            if (initialLang === defaultLanguage) {
                const koButton = document.querySelector('.language-option[data-lang="ko"]');
                if (koButton) {
                    koButton.classList.add('selected');
                }
            }

            window.applyLanguage = applyLanguage;
        })();
    </script>


    <script>
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', () => {
                navigator.serviceWorker.register('./service-worker.js')
                    .catch(err => console.error('Service worker registration failed:', err));
            });
        }
    </script>

    <footer class="app-footer" style="padding:1rem 1.5rem; display:flex; align-items:center; justify-content:center; gap:0.75rem; font-size:0.875rem; opacity:0.8;">
        <span>Â© 2025 PKC Korean Learning v1.2</span>
        <a
            href="https://www.producthunt.com/products/pkc-korean-learning-app?embed=true&utm_source=badge-featured&utm_medium=badge&utm_source=badge-pkc&#0045;korean&#0045;learning&#0045;app"
            target="_blank"
        >
            <img
                src="https://api.producthunt.com/widgets/embed-image/v1/featured.svg?post_id=1043750&theme=neutral&t=1764495606803"
                alt="PKC&#0032;Korean&#0032;Learning&#0032;App - A&#0032;web&#0032;app&#0032;for&#0032;learning&#0032;Korean | Product Hunt"
                style="width: 200px; height: 43px;"
                width="200"
                height="43"
            />
        </a>
    </footer>

</body>
</html>
